<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyCafet - Pesan Makanan Online</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Montserrat', sans-serif;
        }
        
        :root {
            --primary: #4A70A9;
            --primary-dark: #3a5a8a;
            --primary-light: #6b90c9;
            --accent: #FF6B35;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding-bottom: 80px;
        }
        
        .app-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 15px 0;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            color: white;
        }
        
        .logo-icon {
            font-size: 2rem;
        }
        
        .logo-text {
            font-size: 1.8rem;
            font-weight: 800;
            letter-spacing: -1px;
        }
        
        .cart-icon-wrapper {
            position: relative;
            cursor: pointer;
            padding: 10px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            transition: all 0.3s;
        }
        
        .cart-icon-wrapper:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }
        
        .cart-icon {
            font-size: 1.5rem;
            color: white;
        }
        
        .cart-badge {
            position: absolute;
            top: 0;
            right: 0;
            background: var(--accent);
            color: white;
            border-radius: 50%;
            width: 22px;
            height: 22px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: 700;
            border: 2px solid white;
        }
        
        /* Canteen Slider */
        .canteen-section {
            margin: 30px 0;
        }
        
        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .canteen-slider-wrapper {
            position: relative;
            overflow: hidden;
        }
        
        .canteen-slider {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            scroll-behavior: smooth;
            scrollbar-width: none;
            -ms-overflow-style: none;
            padding: 10px 5px;
        }
        
        .canteen-slider::-webkit-scrollbar {
            display: none;
        }
        
        .canteen-card {
            min-width: 300px;
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }
        
        .canteen-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 40px rgba(74,112,169,0.3);
            border-color: var(--primary);
        }
        
        .canteen-card.selected {
            border-color: var(--primary);
            background: linear-gradient(135deg, #ffffff 0%, #f0f4ff 100%);
        }
        
        .canteen-icon {
            font-size: 4rem;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .canteen-name {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary);
            text-align: center;
            margin-bottom: 5px;
        }
        
        .canteen-location {
            text-align: center;
            color: #6c757d;
            font-size: 0.9rem;
        }
        
        /* Menu Cards */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }
        
        .menu-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 6px 25px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }
        
        .menu-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 12px 35px rgba(74,112,169,0.25);
        }
        
        .menu-image {
            height: 200px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 5rem;
            position: relative;
            overflow: hidden;
        }
        
        .menu-image::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
        }
        
        .badge-recommended {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--accent);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            z-index: 10;
            box-shadow: 0 4px 10px rgba(255,107,53,0.4);
        }
        
        .menu-content {
            padding: 20px;
        }
        
        .menu-name {
            font-size: 1.2rem;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 8px;
        }
        
        .menu-desc {
            color: #718096;
            font-size: 0.9rem;
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .menu-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .menu-price {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .btn-add-cart {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .btn-add-cart:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }
        
        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.1);
            z-index: 1000;
            padding: 10px 0;
        }
        
        .nav-items {
            display: flex;
            justify-content: space-around;
            align-items: center;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            padding: 10px 20px;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 15px;
            color: #6c757d;
        }
        
        .nav-item:hover {
            background: rgba(74,112,169,0.1);
            color: var(--primary);
        }
        
        .nav-item.active {
            color: var(--primary);
            background: rgba(74,112,169,0.15);
        }
        
        .nav-item i {
            font-size: 1.5rem;
        }
        
        .nav-item span {
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        /* Modal Styles */
        .modal-content {
            border: none;
            border-radius: 25px;
            overflow: hidden;
        }
        
        .modal-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border: none;
            padding: 20px 25px;
        }
        
        .modal-title {
            font-weight: 700;
            font-size: 1.5rem;
        }
        
        .btn-close {
            filter: brightness(0) invert(1);
        }
        
        .quantity-selector {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin: 25px 0;
        }
        
        .qty-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: 2px solid var(--primary);
            background: white;
            color: var(--primary);
            font-size: 1.5rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .qty-btn:hover {
            background: var(--primary);
            color: white;
        }
        
        .qty-display {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            min-width: 60px;
            text-align: center;
        }
        
        /* Cart Page */
        .cart-item {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        
        .cart-item-content {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .cart-item-icon {
            font-size: 3rem;
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
        }
        
        .cart-item-details {
            flex-grow: 1;
        }
        
        .cart-item-name {
            font-weight: 700;
            font-size: 1.1rem;
            color: #2d3748;
            margin-bottom: 5px;
        }
        
        .cart-item-price {
            color: var(--primary);
            font-weight: 600;
        }
        
        .cart-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .cart-summary {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-top: 20px;
            box-shadow: 0 6px 25px rgba(0,0,0,0.1);
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        .summary-total {
            font-weight: 700;
            font-size: 1.5rem;
            color: var(--primary);
            border-top: 2px solid #e2e8f0;
            padding-top: 15px;
        }
        
        /* Payment Options */
        .payment-option {
            border: 3px solid #e2e8f0;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .payment-option:hover {
            border-color: var(--primary);
            background: rgba(74,112,169,0.05);
        }
        
        .payment-option.selected {
            border-color: var(--primary);
            background: rgba(74,112,169,0.1);
            box-shadow: 0 4px 15px rgba(74,112,169,0.2);
        }
        
        .payment-icon {
            font-size: 2rem;
            color: var(--primary);
        }
        
        .payment-info {
            flex-grow: 1;
        }
        
        .payment-name {
            font-weight: 700;
            color: #2d3748;
            font-size: 1.1rem;
        }
        
        .payment-desc {
            color: #718096;
            font-size: 0.9rem;
        }
        
        /* Order Status */
        .status-container {
            text-align: center;
            padding: 40px 20px;
        }
        
        .status-icon {
            font-size: 6rem;
            color: var(--success);
            margin-bottom: 20px;
            animation: scaleIn 0.5s ease;
        }
        
        @keyframes scaleIn {
            from {
                transform: scale(0);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        .qr-code-container {
            width: 250px;
            height: 250px;
            margin: 30px auto;
            background: white;
            border: 4px solid var(--primary);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
        }
        
        .qr-code-icon {
            font-size: 10rem;
            color: var(--primary);
        }
        
        /* History */
        .history-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        
        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }
        
        .order-code {
            font-weight: 700;
            color: var(--primary);
            font-size: 1.1rem;
        }
        
        .order-date {
            color: #718096;
            font-size: 0.85rem;
        }
        
        .status-badge {
            background: var(--success);
            color: white;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .order-items {
            border-left: 3px solid var(--primary);
            padding-left: 15px;
            margin: 15px 0;
        }
        
        .order-item {
            color: #4a5568;
            margin-bottom: 5px;
        }
        
        .history-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #f7fafc;
        }
        
        .order-total {
            font-weight: 700;
            font-size: 1.2rem;
            color: var(--primary);
        }
        
        /* Star Rating */
        .star-rating {
            display: flex;
            gap: 5px;
            font-size: 2rem;
        }
        
        .star {
            cursor: pointer;
            color: #cbd5e0;
            transition: all 0.2s;
        }
        
        .star:hover,
        .star.active {
            color: #fbbf24;
            transform: scale(1.2);
        }
        
        .star-display {
            color: #fbbf24;
            font-size: 1.2rem;
        }
        
        /* Buttons */
        .btn-primary-custom {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            border: none;
            color: white;
            padding: 15px 30px;
            border-radius: 30px;
            font-weight: 700;
            font-size: 1.1rem;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(74,112,169,0.3);
        }
        
        .btn-primary-custom:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(74,112,169,0.4);
        }
        
        .btn-outline-custom {
            border: 2px solid var(--primary);
            color: var(--primary);
            background: white;
            padding: 12px 25px;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .btn-outline-custom:hover {
            background: var(--primary);
            color: white;
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
        }
        
        .empty-icon {
            font-size: 5rem;
            color: #cbd5e0;
            margin-bottom: 20px;
        }
        
        .empty-text {
            color: #718096;
            font-size: 1.1rem;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .menu-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .canteen-card {
                min-width: 250px;
            }
        }
        
        @media (max-width: 576px) {
            .menu-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="app-header">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center">
                <div class="logo">
                    <div class="logo-icon">üçΩÔ∏è</div>
                    <div class="logo-text">MyCafet</div>
                </div>
                <div class="cart-icon-wrapper" onclick="showPage('cart')">
                    <i class="fas fa-shopping-cart cart-icon"></i>
                    <span class="cart-badge" id="cartBadge">0</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container mt-4">
        <!-- Home Page -->
        <div id="homePage">
            <!-- Canteen Section -->
            <div class="canteen-section">
                <h2 class="section-title">
                    <i class="fas fa-store"></i>
                    Pilih Kantin Favorit
                </h2>
                <div class="canteen-slider-wrapper">
                    <div class="canteen-slider" id="canteenSlider">
                        <div class="canteen-card" onclick="selectCanteen(0)">
                            <div class="canteen-icon">üè¢</div>
                            <div class="canteen-name">Kantin Utama</div>
                            <div class="canteen-location">üìç Lantai 1, Gedung A</div>
                        </div>
                        <div class="canteen-card" onclick="selectCanteen(1)">
                            <div class="canteen-icon">‚öôÔ∏è</div>
                            <div class="canteen-name">Kantin Teknik</div>
                            <div class="canteen-location">üìç Gedung Teknik</div>
                        </div>
                        <div class="canteen-card" onclick="selectCanteen(2)">
                            <div class="canteen-icon">üíº</div>
                            <div class="canteen-name">Kantin Ekonomi</div>
                            <div class="canteen-location">üìç Lantai 2, FEB</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recommended Section -->
            <div class="mt-5">
                <h2 class="section-title">
                    <i class="fas fa-fire"></i>
                    Menu Rekomendasi
                </h2>
                <div class="menu-grid" id="recommendedMenu"></div>
            </div>

            <!-- All Menu Section -->
            <div class="mt-5">
                <h2 class="section-title">
                    <i class="fas fa-utensils"></i>
                    Semua Menu
                </h2>
                <div class="menu-grid" id="allMenu"></div>
            </div>
        </div>

        <!-- Cart Page -->
        <div id="cartPage" style="display: none;">
            <h2 class="section-title mb-4">
                <i class="fas fa-shopping-cart"></i>
                Keranjang Belanja
            </h2>
            <div id="cartItems"></div>
            <div class="cart-summary" id="cartSummary" style="display: none;">
                <div class="summary-row">
                    <span>Subtotal</span>
                    <span id="subtotal">Rp 0</span>
                </div>
                <div class="summary-row summary-total">
                    <span>Total</span>
                    <span id="total">Rp 0</span>
                </div>
                <button class="btn btn-primary-custom w-100 mt-3" onclick="showCheckout()">
                    <i class="fas fa-credit-card me-2"></i>
                    Lanjut ke Pembayaran
                </button>
            </div>
        </div>

        <!-- History Page -->
        <div id="historyPage" style="display: none;">
            <h2 class="section-title mb-4">
                <i class="fas fa-history"></i>
                Riwayat Pesanan
            </h2>
            <div id="historyItems"></div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="nav-items">
            <div class="nav-item active" onclick="showPage('home')">
                <i class="fas fa-home"></i>
                <span>Beranda</span>
            </div>
            <div class="nav-item" onclick="showPage('cart')">
                <i class="fas fa-shopping-cart"></i>
                <span>Keranjang</span>
            </div>
            <div class="nav-item" onclick="showPage('history')">
                <i class="fas fa-history"></i>
                <span>Riwayat</span>
            </div>
        </div>
    </nav>

    <!-- Modal Menu Detail -->
    <div class="modal fade" id="menuModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalMenuName"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-4">
                        <div id="modalMenuIcon" style="font-size: 6rem;"></div>
                    </div>
                    <p class="text-center text-muted mb-3" id="modalMenuDesc"></p>
                    <h3 class="text-center mb-4" style="color: var(--primary); font-weight: 700;" id="modalMenuPrice"></h3>
                    
                    <div class="quantity-selector">
                        <button class="qty-btn" onclick="changeQty(-1)">‚àí</button>
                        <div class="qty-display" id="qtyDisplay">1</div>
                        <button class="qty-btn" onclick="changeQty(1)">+</button>
                    </div>
                </div>
                <div class="modal-footer border-0">
                    <button class="btn btn-primary-custom w-100" onclick="addToCart()">
                        <i class="fas fa-cart-plus me-2"></i>
                        Tambah ke Keranjang
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Checkout -->
    <div class="modal fade" id="checkoutModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-credit-card me-2"></i>
                        Checkout Pesanan
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <h6 class="fw-bold mb-3">1. Pilih Metode Pengambilan</h6>
                    <div class="payment-option" onclick="selectDeliveryMethod('pickup')">
                        <div class="payment-icon">üì¶</div>
                        <div class="payment-info">
                            <div class="payment-name">Pick Up</div>
                            <div class="payment-desc">Ambil sendiri di kantin (Bayar Cash)</div>
                        </div>
                        <i class="fas fa-check-circle" style="font-size: 1.5rem; color: var(--primary); opacity: 0;"></i>
                    </div>
                    <div class="payment-option" onclick="selectDeliveryMethod('delivery')">
                        <div class="payment-icon">üèçÔ∏è</div>
                        <div class="payment-info">
                            <div class="payment-name">Delivery</div>
                            <div class="payment-desc">Diantar ke lokasi Anda</div>
                        </div>
                        <i class="fas fa-check-circle" style="font-size: 1.5rem; color: var(--primary); opacity: 0;"></i>
                    </div>

                    <div id="paymentSection" style="display: none;">
                        <h6 class="fw-bold mb-3 mt-4">2. Pilih Metode Pembayaran</h6>
                        <div class="payment-option" onclick="selectPaymentMethod('ewallet')">
                            <div class="payment-icon">üí≥</div>
                            <div class="payment-info">
                                <div class="payment-name">E-Wallet</div>
                                <div class="payment-desc">GoPay, OVO, Dana, LinkAja</div>
                            </div>
                            <i class="fas fa-check-circle" style="font-size: 1.5rem; color: var(--primary); opacity: 0;"></i>
                        </div>
                        <div class="payment-option" onclick="selectPaymentMethod('bank')">
                            <div class="payment-icon">üè¶</div>
                            <div class="payment-info">
                                <div class="payment-name">Transfer Bank</div>
                                <div class="payment-desc">BCA, Mandiri, BNI, BRI</div>
                            </div>
                            <i class="fas fa-check-circle" style="font-size: 1.5rem; color: var(--primary); opacity: 0;"></i>
                        </div>
                    </div>
                </div>
                <div class="modal-footer border-0">
                    <button class="btn btn-primary-custom w-100" onclick="processCheckout()">
                        <i class="fas fa-check me-2"></i>
                        Proses Pesanan
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Order Success -->
    <div class="modal fade" id="successModal" tabindex="-1" data-bs-backdrop="static">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="status-container">
                        <div class="status-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <h4 class="fw-bold mb-3">Pesanan Berhasil!</h4>
                        <p class="text-muted mb-2">Kode Pesanan</p>
                        <h3 class="fw-bold mb-4" style="color: var(--primary);" id="orderCode"></h3>
                        
                        <div class="qr-code-container">
                            <i class="fas fa-qrcode qr-code-icon"></i>
                        </div>
                        
                        <div class="alert alert-info mt-4">
                            <i class="fas fa-clock me-2"></i>
                            <strong>Estimasi:</strong> <span id="estimateTime">15-20 menit</span>
                        </div>
                        
                        <p class="text-muted small">Tunjukkan QR Code ini saat mengambil pesanan</p>
                        
                        <button class="btn btn-primary-custom mt-3" onclick="closeSuccessModal()">
                            <i class="fas fa-home me-2"></i>
                            Kembali ke Beranda
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Review -->
    <div class="modal fade" id="reviewModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-star me-2"></i>
                        Berikan Ulasan
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p class="text-center text-muted mb-3">Bagaimana pengalaman Anda?</p>
                    <div class="star-rating justify-content-center mb-4" id="starRating">
                        <i class="fas fa-star star" data-rating="1"></i>
                        <i class="fas fa-star star" data-rating="2"></i>
                        <i class="fas fa-star star" data-rating="3"></i>
                        <i class="fas fa-star star" data-rating="4"></i>
                        <i class="fas fa-star star" data-rating="5"></i>
                    </div>
                    <textarea class="form-control" id="reviewText" rows="4" placeholder="Tulis ulasan Anda di sini... (opsional)"></textarea>
                </div>
                <div class="modal-footer border-0">
                    <button class="btn btn-primary-custom w-100" onclick="submitReview()">
                        <i class="fas fa-paper-plane me-2"></i>
                        Kirim Ulasan
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Data Menu
        const menuData = [
            {
                id: 1,
                name: 'Ayam Goreng',
                price: 15000,
                icon: 'üçó',
                desc: 'Ayam goreng crispy dengan bumbu rahasia khas kampus',
                recommended: true,
                gradient: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)'
            },
            {
                id: 2,
                name: 'Ayam Geprek',
                price: 18000,
                icon: 'üå∂Ô∏è',
                desc: 'Ayam geprek pedas dengan sambal level maksimal',
                recommended: true,
                gradient: 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)'
            },
            {
                id: 3,
                name: 'Nasi Goreng',
                price: 12000,
                icon: 'üçö',
                desc: 'Nasi goreng spesial dengan telur mata sapi',
                recommended: true,
                gradient: 'linear-gradient(135deg, #30cfd0 0%, #330867 100%)'
            },
            {
                id: 4,
                name: 'Seblak',
                price: 10000,
                icon: 'üç≤',
                desc: 'Seblak pedas gurih dengan kerupuk kenyal',
                recommended: false,
                gradient: 'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)'
            },
            {
                id: 5,
                name: 'Tom Yum',
                price: 20000,
                icon: 'üçú',
                desc: 'Tom yum Thailand asli dengan rasa pedas asam segar',
                recommended: false,
                gradient: 'linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)'
            },
            {
                id: 6,
                name: 'Batagor',
                price: 13000,
                icon: 'ü•ü',
                desc: 'Batagor isi ikan tenggiri dengan saus kacang',
                recommended: false,
                gradient: 'linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)'
            },
            {
                id: 7,
                name: 'Mie Ayam',
                price: 12000,
                icon: 'üçù',
                desc: 'Mie ayam bakso spesial dengan pangsit goreng',
                recommended: false,
                gradient: 'linear-gradient(135deg, #ff6e7f 0%, #bfe9ff 100%)'
            },
            {
                id: 8,
                name: 'Soto Ayam',
                price: 15000,
                icon: 'ü•ò',
                desc: 'Soto ayam kuah kuning dengan taburan bawang goreng',
                recommended: false,
                gradient: 'linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%)'
            },
            {
                id: 9,
                name: 'Bakso',
                price: 13000,
                icon: 'üç≤',
                desc: 'Bakso sapi jumbo dengan kuah kaldu segar',
                recommended: false,
                gradient: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'
            }
        ];

        // State Management
        let cart = [];
        let selectedMenu = null;
        let currentQty = 1;
        let deliveryMethod = null;
        let paymentMethod = null;
        let selectedRating = 0;
        let currentOrderForReview = null;

        // Initialize App
        function init() {
            loadCartFromStorage();
            renderMenus();
            updateCartBadge();
            renderHistory();
            setupEventListeners();
        }

        // Setup Event Listeners
        function setupEventListeners() {
            // Star rating click
            document.querySelectorAll('.star').forEach(star => {
                star.addEventListener('click', function() {
                    selectedRating = parseInt(this.dataset.rating);
                    updateStarDisplay();
                });
            });
        }

        // Render Menus
        function renderMenus() {
            const recommended = menuData.filter(m => m.recommended);
            const allMenu = menuData;

            document.getElementById('recommendedMenu').innerHTML = recommended.map(menu => createMenuCard(menu)).join('');
            document.getElementById('allMenu').innerHTML = allMenu.map(menu => createMenuCard(menu)).join('');
        }

        function createMenuCard(menu) {
            return `
                <div class="menu-card" onclick="showMenuDetail(${menu.id})">
                    ${menu.recommended ? '<span class="badge-recommended">‚≠ê Rekomendasi</span>' : ''}
                    <div class="menu-image" style="background: ${menu.gradient}">
                        ${menu.icon}
                    </div>
                    <div class="menu-content">
                        <h5 class="menu-name">${menu.name}</h5>
                        <p class="menu-desc">${menu.desc}</p>
                        <div class="menu-footer">
                            <span class="menu-price">Rp ${menu.price.toLocaleString('id-ID')}</span>
                            <button class="btn-add-cart">
                                <i class="fas fa-plus me-1"></i> Pesan
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Show Menu Detail Modal
        function showMenuDetail(menuId) {
            selectedMenu = menuData.find(m => m.id === menuId);
            currentQty = 1;
            
            document.getElementById('modalMenuName').textContent = selectedMenu.name;
            document.getElementById('modalMenuIcon').textContent = selectedMenu.icon;
            document.getElementById('modalMenuDesc').textContent = selectedMenu.desc;
            document.getElementById('modalMenuPrice').textContent = `Rp ${selectedMenu.price.toLocaleString('id-ID')}`;
            document.getElementById('qtyDisplay').textContent = currentQty;
            
            new bootstrap.Modal(document.getElementById('menuModal')).show();
        }

        // Change Quantity
        function changeQty(delta) {
            currentQty += delta;
            if (currentQty < 1) currentQty = 1;
            document.getElementById('qtyDisplay').textContent = currentQty;
        }

        // Add to Cart
        function addToCart() {
            const existingItem = cart.find(item => item.id === selectedMenu.id);
            
            if (existingItem) {
                existingItem.quantity += currentQty;
            } else {
                cart.push({
                    ...selectedMenu,
                    quantity: currentQty
                });
            }
            
            saveCartToStorage();
            updateCartBadge();
            
            bootstrap.Modal.getInstance(document.getElementById('menuModal')).hide();
            
            showNotification('Berhasil ditambahkan ke keranjang!', 'success');
        }

        // Show Page
        function showPage(page) {
            // Hide all pages
            document.getElementById('homePage').style.display = 'none';
            document.getElementById('cartPage').style.display = 'none';
            document.getElementById('historyPage').style.display = 'none';
            
            // Remove active from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected page
            if (page === 'home') {
                document.getElementById('homePage').style.display = 'block';
                document.querySelectorAll('.nav-item')[0].classList.add('active');
            } else if (page === 'cart') {
                document.getElementById('cartPage').style.display = 'block';
                document.querySelectorAll('.nav-item')[1].classList.add('active');
                renderCart();
            } else if (page === 'history') {
                document.getElementById('historyPage').style.display = 'block';
                document.querySelectorAll('.nav-item')[2].classList.add('active');
                renderHistory();
            }
        }

        // Render Cart
        function renderCart() {
            const cartContainer = document.getElementById('cartItems');
            const cartSummary = document.getElementById('cartSummary');
            
            if (cart.length === 0) {
                cartContainer.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üõí</div>
                        <h5 class="empty-text">Keranjang Anda Kosong</h5>
                        <p class="text-muted">Yuk pesan makanan favorit Anda!</p>
                        <button class="btn btn-primary-custom mt-3" onclick="showPage('home')">
                            <i class="fas fa-utensils me-2"></i>
                            Lihat Menu
                        </button>
                    </div>
                `;
                cartSummary.style.display = 'none';
                return;
            }
            
            cartContainer.innerHTML = cart.map((item, index) => `
                <div class="cart-item">
                    <div class="cart-item-content">
                        <div class="cart-item-icon" style="background: ${item.gradient}">
                            ${item.icon}
                        </div>
                        <div class="cart-item-details">
                            <div class="cart-item-name">${item.name}</div>
                            <div class="cart-item-price">Rp ${item.price.toLocaleString('id-ID')}</div>
                        </div>
                        <div class="cart-controls">
                            <button class="qty-btn" style="width: 35px; height: 35px; font-size: 1.2rem;" onclick="updateCartQty(${index}, -1)">‚àí</button>
                            <span class="fw-bold mx-2" style="min-width: 30px; text-align: center; display: inline-block;">${item.quantity}</span>
                            <button class="qty-btn" style="width: 35px; height: 35px; font-size: 1.2rem;" onclick="updateCartQty(${index}, 1)">+</button>
                            <button class="btn btn-outline-danger btn-sm ms-2" onclick="removeFromCart(${index})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
            
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            document.getElementById('subtotal').textContent = `Rp ${subtotal.toLocaleString('id-ID')}`;
            document.getElementById('total').textContent = `Rp ${subtotal.toLocaleString('id-ID')}`;
            cartSummary.style.display = 'block';
        }

        // Update Cart Quantity
        function updateCartQty(index, delta) {
            cart[index].quantity += delta;
            
            if (cart[index].quantity <= 0) {
                cart.splice(index, 1);
            }
            
            saveCartToStorage();
            updateCartBadge();
            renderCart();
        }

        // Remove from Cart
        function removeFromCart(index) {
            cart.splice(index, 1);
            saveCartToStorage();
            updateCartBadge();
            renderCart();
        }

        // Update Cart Badge
        function updateCartBadge() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartBadge').textContent = totalItems;
        }

        // Show Checkout Modal
        function showCheckout() {
            if (cart.length === 0) {
                showNotification('Keranjang masih kosong!', 'warning');
                return;
            }
            
            deliveryMethod = null;
            paymentMethod = null;
            document.getElementById('paymentSection').style.display = 'none';
            
            // Reset selections
            document.querySelectorAll('.payment-option').forEach(opt => {
                opt.classList.remove('selected');
                opt.querySelector('.fa-check-circle').style.opacity = '0';
            });
            
            new bootstrap.Modal(document.getElementById('checkoutModal')).show();
        }

        // Select Delivery Method
        function selectDeliveryMethod(method) {
            deliveryMethod = method;
            
            // Reset all delivery options
            const deliveryOptions = document.querySelectorAll('#checkoutModal .payment-option');
            deliveryOptions.forEach((opt, idx) => {
                if (idx < 2) {
                    opt.classList.remove('selected');
                    opt.querySelector('.fa-check-circle').style.opacity = '0';
                }
            });
            
            // Select current
            event.currentTarget.classList.add('selected');
            event.currentTarget.querySelector('.fa-check-circle').style.opacity = '1';
            
            if (method === 'delivery') {
                document.getElementById('paymentSection').style.display = 'block';
            } else {
                document.getElementById('paymentSection').style.display = 'none';
                paymentMethod = 'cash';
            }
        }

        // Select Payment Method
        function selectPaymentMethod(method) {
            paymentMethod = method;
            
            // Reset payment options
            const paymentOptions = document.querySelectorAll('#paymentSection .payment-option');
            paymentOptions.forEach(opt => {
                opt.classList.remove('selected');
                opt.querySelector('.fa-check-circle').style.opacity = '0';
            });
            
            // Select current
            event.currentTarget.classList.add('selected');
            event.currentTarget.querySelector('.fa-check-circle').style.opacity = '1';
        }

        // Process Checkout
        function processCheckout() {
            if (!deliveryMethod) {
                showNotification('Silakan pilih metode pengambilan!', 'warning');
                return;
            }
            
            if (deliveryMethod === 'delivery' && !paymentMethod) {
                showNotification('Silakan pilih metode pembayaran!', 'warning');
                return;
            }
            
            // Generate order code
            const orderCode = 'MYC' + Date.now().toString().slice(-8).toUpperCase();
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            // Create order object
            const order = {
                id: Date.now(),
                code: orderCode,
                items: [...cart],
                total: total,
                deliveryMethod: deliveryMethod,
                paymentMethod: paymentMethod || 'cash',
                date: new Date().toISOString(),
                status: 'completed',
                rating: 0,
                review: ''
            };
            
            // Save order
            let orders = JSON.parse(localStorage.getItem('orders') || '[]');
            orders.push(order);
            localStorage.setItem('orders', JSON.stringify(orders));
            
            // Clear cart
            cart = [];
            saveCartToStorage();
            updateCartBadge();
            
            // Close checkout modal
            bootstrap.Modal.getInstance(document.getElementById('checkoutModal')).hide();
            
            // Show success modal
            document.getElementById('orderCode').textContent = orderCode;
            const estimateText = deliveryMethod === 'pickup' ? '10-15 menit' : '25-30 menit';
            document.getElementById('estimateTime').textContent = estimateText;
            
            new bootstrap.Modal(document.getElementById('successModal')).show();
        }

        // Close Success Modal
        function closeSuccessModal() {
            bootstrap.Modal.getInstance(document.getElementById('successModal')).hide();
            showPage('home');
        }

        // Render History
        function renderHistory() {
            const orders = JSON.parse(localStorage.getItem('orders') || '[]');
            const container = document.getElementById('historyItems');
            
            if (orders.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üìã</div>
                        <h5 class="empty-text">Belum Ada Riwayat Pesanan</h5>
                        <p class="text-muted">Pesanan Anda akan muncul di sini</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = orders.reverse().map(order => `
                <div class="history-card">
                    <div class="history-header">
                        <div>
                            <div class="order-code">${order.code}</div>
                            <div class="order-date">${new Date(order.date).toLocaleString('id-ID', {
                                day: 'numeric',
                                month: 'long',
                                year: 'numeric',
                                hour: '2-digit',
                                minute: '2-digit'
                            })}</div>
                        </div>
                        <span class="status-badge">
                            <i class="fas fa-check me-1"></i> Selesai
                        </span>
                    </div>
                    
                    <div class="order-items">
                        ${order.items.map(item => `
                            <div class="order-item">
                                ${item.icon} ${item.name} x${item.quantity}
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="history-footer">
                        <div class="order-total">Rp ${order.total.toLocaleString('id-ID')}</div>
                        ${order.rating === 0 ? `
                            <button class="btn btn-outline-custom btn-sm" onclick="showReviewModal(${order.id})">
                                <i class="fas fa-star me-1"></i> Beri Ulasan
                            </button>
                        ` : `
                            <div class="star-display">
                                ${'‚≠ê'.repeat(order.rating)}
                            </div>
                        `}
                    </div>
                </div>
            `).join('');
        }

        // Show Review Modal
        function showReviewModal(orderId) {
            currentOrderForReview = orderId;
            selectedRating = 0;
            document.getElementById('reviewText').value = '';
            updateStarDisplay();
            new bootstrap.Modal(document.getElementById('reviewModal')).show();
        }

        // Update Star Display
        function updateStarDisplay() {
            document.querySelectorAll('.star').forEach((star, index) => {
                if (index < selectedRating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        // Submit Review
        function submitReview() {
            if (selectedRating === 0) {
                showNotification('Silakan pilih rating bintang!', 'warning');
                return;
            }
            
            let orders = JSON.parse(localStorage.getItem('orders') || '[]');
            const orderIndex = orders.findIndex(o => o.id === currentOrderForReview);
            
            if (orderIndex !== -1) {
                orders[orderIndex].rating = selectedRating;
                orders[orderIndex].review = document.getElementById('reviewText').value;
                localStorage.setItem('orders', JSON.stringify(orders));
            }
            
            bootstrap.Modal.getInstance(document.getElementById('reviewModal')).hide();
            showNotification('Terima kasih atas ulasan Anda!', 'success');
            renderHistory();
        }

        // Select Canteen
        function selectCanteen(index) {
            const canteenCards = document.querySelectorAll('.canteen-card');
            canteenCards.forEach(card => card.classList.remove('selected'));
            canteenCards[index].classList.add('selected');
            
            const canteenNames = ['Kantin Utama', 'Kantin Teknik', 'Kantin Ekonomi'];
            showNotification(`${canteenNames[index]} dipilih`, 'info');
        }

        // Show Notification
        function showNotification(message, type = 'success') {
            const alertClass = type === 'success' ? 'alert-success' : type === 'warning' ? 'alert-warning' : 'alert-info';
            const icon = type === 'success' ? 'check-circle' : type === 'warning' ? 'exclamation-triangle' : 'info-circle';
            
            const notification = document.createElement('div');
            notification.className = `alert ${alertClass} position-fixed top-0 start-50 translate-middle-x mt-3`;
            notification.style.zIndex = '9999';
            notification.innerHTML = `
                <i class="fas fa-${icon} me-2"></i>${message}
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Local Storage Functions
        function saveCartToStorage() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        function loadCartFromStorage() {
            const savedCart = localStorage.getItem('cart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
            }
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
